<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Διευθυντής Τεχνητής Νοημοσύνης - Πρόγραμμα Εκπαίδευσης</title>
    <link rel="stylesheet" href="book-style.css">
    <link rel="stylesheet" href="theme-switcher.css">
    <link rel="stylesheet" href="assets/fontawesome/css/all.min.css">
</head>
<body>
    <!-- Living Margin Canvas - The Creative Edge -->
    <canvas id="living-margin-canvas"></canvas>
    
    <!-- Clear Doodles Button -->
    <button id="clear-doodles-btn" title="Καθαρισμός Σκίτσων">
        <i class="fa-solid fa-eraser"></i>
    </button>

    <!-- AI-Q Dashboard Layout -->
    <div class="aiq-dashboard">
        <!-- Left Column: AI-Q Profile & Progress -->
        <div class="aiq-profile-section">
            <div class="aiq-profile-header">
                <h2 class="aiq-title">Η Πρόοδός μου</h2>
                <div class="aiq-subtitle">AI-Q Score</div>
            </div>
            
            <!-- AI-Q Score Display -->
            <div class="aiq-score-container">
                <div class="aiq-score-display">
                    <span class="aiq-score-number" id="iq-score">85</span>
                    <span class="aiq-score-label">AI-Q</span>
                </div>
                <div class="aiq-score-description" id="iq-description">
                    Αρχάριος Στρατηγός
                </div>
            </div>
            
            <!-- AI-Q Progress Bar -->
            <div class="aiq-bar-container">
                <div class="aiq-bar-background">
                    <div class="aiq-bar-fill" id="iq-bar-fill" style="height: 15%;">
                        <div class="aiq-bar-glow"></div>
                    </div>
                </div>
                <div class="aiq-bar-labels">
                    <span class="aiq-bar-min">50</span>
                    <span class="aiq-bar-max">200</span>
                </div>
            </div>
            
            <!-- Achievement Status -->
            <div class="aiq-achievements">
                <div class="aiq-stat">
                    <i class="fa-solid fa-trophy"></i>
                    <span class="aiq-stat-value" id="completed-levels">0</span>
                    <span class="aiq-stat-label">Επίπεδα</span>
                </div>
                <div class="aiq-stat">
                    <i class="fa-solid fa-star"></i>
                    <span class="aiq-stat-value" id="total-points">0</span>
                    <span class="aiq-stat-label">Πόντοι</span>
                </div>
                <div class="aiq-stat">
                    <i class="fa-solid fa-brain"></i>
                    <span class="aiq-stat-value" id="iq-rank">Νεόφυτος</span>
                    <span class="aiq-stat-label">Βαθμίδα</span>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="aiq-quick-actions">
                <button class="aiq-action-btn" onclick="toggleProgressDetails()">
                    <i class="fa-solid fa-chart-line"></i>
                    Λεπτομέρειες Προόδου
                </button>
                <button class="aiq-action-btn secondary" onclick="resetProgress()">
                    <i class="fa-solid fa-refresh"></i>
                    Επανεκκίνηση
                </button>
            </div>
        </div>

        <!-- Right Column: Learning Path & Content -->
        <div class="aiq-content-section">
            <div class="aiq-content-header">
                <h1 class="aiq-main-title">Διευθυντής Τεχνητής Νοημοσύνης</h1>
                <p class="aiq-main-subtitle">
                    Ολοκληρωμένο πρόγραμμα εκπαίδευσης σε στρατηγική και υλοποίηση Τεχνητής Νοημοσύνης.<br>
                    <strong>Προχωρήστε στα επίπεδα με τη σειρά για να αυξήσετε το AI-Q σας.</strong>
                </p>
            </div>

            <!-- Level Cards Container -->
            <div class="aiq-level-cards" id="level-cards-container">
                <!-- Cards will be dynamically generated by JavaScript -->
            </div>
        </div>
    </div>

        <!-- Legacy Navigation (Hidden by default) -->
        <div class="nav-menu" style="display: none;" id="legacy-nav">
            <a href="index.html">Εστία</a>
            <a href="main-book.html">Βιβλίον</a>
            <a href="student_workbook_enhanced.html">Τετράδιον Εργασιών</a>
            <a href="quick_reference_guide.html">Εγκόλπιον</a>
            <a href="instructor_implementation_guide_parts_1_2.html">Οδηγός</a>
            <a href="ai-smart-dummies-guide.html">Αλφαβητάριον</a>
            <a href="digital_assets/index.html">Εποπτικά Μέσα</a>
            <a href="videos.html">Βιντεοθήκη</a>
            <a href="neo/index.html">Έδρα</a>
            <a href="https://deefunxion.github.io/AILEADER/" target="_blank">Αγωγή</a>
            <a href="didaskalia.html">Διδασκαλία</a>
            <a href="themelion.html">Θεμέλιον</a>
        </div>

        <!-- Debug Controls (Hidden by default) -->
        <div style="margin-top: 40px; padding: 20px; border: 1px solid #ccc; background: #f9f9f9; display: none;" id="debug-controls">
            <h3>Εργαλεία Διαχείρισης (Για Δοκιμές)</h3>
            <button onclick="window.progressTracker?.resetProgress()" style="margin-right: 10px;">Επανεκκίνηση Προόδου</button>
            <button onclick="toggleLegacyNav()" style="margin-right: 10px;">Εμφάνιση Κλασικής Πλοήγησης</button>
            <button onclick="console.log(window.progressTracker?.getProgressInfo())">Εμφάνιση Πληροφοριών Προόδου</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="learning-path.js"></script>
    <script src="aiq-tracker.js"></script>
    <script src="doodler.js"></script>
    <script src="theme-switcher.js"></script>
    <script src="mobile-nav.js"></script>
    
    <script>
        // Dashboard initialization
        document.addEventListener('DOMContentLoaded', function() {
            generateLevelCards();
            
            // Show debug controls in development (you can remove this)
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                document.getElementById('debug-controls').style.display = 'block';
            }
        });

        function generateLevelCards() {
            const container = document.getElementById('level-cards-container');
            const allLevels = LearningPathUtils.getAllLevels();
            
            allLevels.forEach((level, index) => {
                const card = createLevelCard(level, index);
                container.appendChild(card);
            });
        }

        function createLevelCard(level, index) {
            const card = document.createElement('a');
            card.href = level.entry_point;
            card.className = 'aiq-level-card locked'; // Start as locked
            card.setAttribute('data-level', level.key);
            
            // External links should open in new tab
            if (level.entry_point.startsWith('http')) {
                card.target = '_blank';
            }
            
            // Calculate level number for display
            const levelNumber = index;
            
            card.innerHTML = `
                <div class="aiq-card-header">
                    <div class="aiq-card-number">ΕΠΙΠΕΔΟ ${levelNumber}</div>
                    <div class="aiq-card-status" data-status="locked">
                        <i class="fa-solid fa-lock"></i>
                    </div>
                </div>
                <div class="aiq-card-content">
                    <div class="aiq-card-icon" style="color: ${level.color}">${level.icon}</div>
                    <div class="aiq-card-title">${level.title}</div>
                    <div class="aiq-card-subtitle">${level.subtitle}</div>
                    <div class="aiq-card-description">${level.description}</div>
                </div>
                <div class="aiq-card-meta">
                    <div class="aiq-card-stats">
                        <span class="aiq-card-time">
                            <i class="fa-solid fa-clock"></i> ${level.estimated_time}
                        </span>
                        <span class="aiq-card-difficulty">
                            <i class="fa-solid fa-chart-line"></i> ${level.difficulty}
                        </span>
                    </div>
                    <div class="aiq-card-reward">
                        <i class="fa-solid fa-brain"></i>
                        <span class="aiq-points">+${getIQPointsForLevel(index)} AI-Q</span>
                    </div>
                </div>
                <div class="aiq-card-progress">
                    <div class="aiq-progress-bar">
                        <div class="aiq-progress-fill" style="width: 0%"></div>
                    </div>
                    <span class="aiq-progress-text">Κλειδωμένο</span>
                </div>
            `;
            
            return card;
        }

        // Helper function to calculate IQ points for each level
        function getIQPointsForLevel(levelIndex) {
            const basePoints = 5;
            const bonusPoints = Math.floor(levelIndex / 2) * 2;
            return basePoints + bonusPoints;
        }

        function toggleLegacyNav() {
            const legacyNav = document.getElementById('legacy-nav');
            legacyNav.style.display = legacyNav.style.display === 'none' ? 'block' : 'none';
        }

        // Update card states when progress changes
        function updateCardStates() {
            if (!window.aiqTracker) return;
            
            const progress = window.aiqTracker.getProgress();
            const unlockedLevels = progress.unlockedLevels || ['level_0'];
            const completedLevels = progress.completedLevels || [];
            
            // Update all cards based on progress
            const cards = document.querySelectorAll('.aiq-level-card');
            cards.forEach((card, index) => {
                const cardLevel = card.getAttribute('data-level');
                const statusIcon = card.querySelector('.aiq-card-status i');
                const progressText = card.querySelector('.aiq-progress-text');
                const progressFill = card.querySelector('.aiq-progress-fill');
                
                if (completedLevels.includes(cardLevel)) {
                    // Completed state
                    card.classList.remove('locked', 'unlocked');
                    card.classList.add('completed');
                    card.setAttribute('data-status', 'completed');
                    statusIcon.className = 'fa-solid fa-check-circle';
                    progressText.textContent = 'Ολοκληρώθηκε';
                    progressFill.style.width = '100%';
                } else if (unlockedLevels.includes(cardLevel)) {
                    // Unlocked state
                    card.classList.remove('locked', 'completed');
                    card.classList.add('unlocked');
                    card.setAttribute('data-status', 'unlocked');
                    statusIcon.className = 'fa-solid fa-play-circle';
                    progressText.textContent = 'Διαθέσιμο';
                    progressFill.style.width = '0%';
                } else {
                    // Locked state
                    card.classList.remove('unlocked', 'completed');
                    card.classList.add('locked');
                    card.setAttribute('data-status', 'locked');
                    statusIcon.className = 'fa-solid fa-lock';
                    progressText.textContent = 'Κλειδωμένο';
                    progressFill.style.width = '0%';
                }
            });
        }

        // Additional helper functions for AI-Q system
        function toggleProgressDetails() {
            // Show detailed progress modal or expand panel
            const progress = window.aiqTracker?.getProgress();
            if (progress) {
                alert(`Λεπτομέρειες Προόδου:\n\nAI-Q Score: ${progress.iq}\nΞεκλειδωμένα Επίπεδα: ${progress.unlockedLevels.length}\nΟλοκληρωμένα Επίπεδα: ${progress.completedLevels.length}\nΣυνολικοί Πόντοι: ${progress.totalPoints || 0}`);
            }
        }

        function resetProgress() {
            if (confirm('Είστε σίγουροι ότι θέλετε να επανεκκινήσετε την πρόοδό σας;')) {
                window.aiqTracker?.resetProgress();
                location.reload();
            }
        }

        // Listen for progress updates
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize AI-Q tracker first
            if (window.aiqTracker) {
                window.aiqTracker.updateUIDisplay();
            }
            
            // Update card states after AI-Q tracker initializes
            setTimeout(updateCardStates, 100);
            
            // Re-update whenever the page becomes visible (in case progress changed in another tab)
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden) {
                    if (window.aiqTracker) {
                        window.aiqTracker.updateUIDisplay();
                    }
                    setTimeout(updateCardStates, 100);
                }
            });
        });
    </script>
</body>
</html>
